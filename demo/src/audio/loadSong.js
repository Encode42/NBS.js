class Instrument extends NBSjs.Instrument{audioBuffer="";constructor(n,t,e){super(n,t,e),void 0!==e&&(this.audioSrc=e.audioSrc||"")}}async function loadSong(n){const t=NBSjs.Song.fromArrayBuffer(await n.file.arrayBuffer()),e={song:t};n={seconds:t.timePerTick*t.size/1e3,get s(){return(this.seconds%60).toFixed(2)},get m(){return Math.floor(this.seconds/60)},get format(){return prependZeros(this.m)+":"+prependZeros(this.s)}};return e.overviews=[["NBS version",t.nbsVersion],["Song name",t.name],["Song author",t.author],["Song description",t.description],["Song tick length",t.size],["Song duration",n.format],["Total layers",t.layers.length],["Custom instruments",t.instruments.map(n=>n.builtIn?null:n.name).filter(Boolean).join(", ")]],e.structureText=JSON.stringify(t,void 0,4),e}function prependZeros(n){return Array.from({length:Math.max(3-Math.floor(n).toString().length,0)}).join("0")+n}Instrument.builtIn=[new Instrument("Harp",0,{audioSrc:"./assets/harp.ogg",builtIn:!0,pressKey:!0}),new Instrument("Double Bass",1,{audioSrc:"./assets/dbass.ogg",builtIn:!0}),new Instrument("Bass Drum",2,{audioSrc:"./assets/bdrum.ogg",builtIn:!0}),new Instrument("Snare Drum",3,{audioSrc:"./assets/sdrum.ogg",builtIn:!0}),new Instrument("Click",4,{audioSrc:"./assets/click.ogg",builtIn:!0}),new Instrument("Guitar",5,{audioSrc:"./assets/guitar.ogg",builtIn:!0}),new Instrument("Flute",6,{audioSrc:"./assets/flute.ogg",builtIn:!0}),new Instrument("Bell",7,{audioSrc:"./assets/bell.ogg",builtIn:!0}),new Instrument("Chime",8,{audioSrc:"./assets/chime.ogg",builtIn:!0}),new Instrument("Xylophone",9,{audioSrc:"./assets/xylophone.ogg",builtIn:!0}),new Instrument("Iron Xylophone",10,{audioSrc:"./assets/iron_xylophone.ogg",builtIn:!0}),new Instrument("Cow Bell",11,{audioSrc:"./assets/cow_bell.ogg",builtIn:!0}),new Instrument("Didgeridoo",12,{audioSrc:"./assets/didgeridoo.ogg",builtIn:!0}),new Instrument("Bit",13,{audioSrc:"./assets/bit.ogg",builtIn:!0}),new Instrument("Banjo",14,{audioSrc:"./assets/banjo.ogg",builtIn:!0}),new Instrument("Pling",15,{audioSrc:"./assets/pling.ogg",builtIn:!0})],NBSjs.setInstrumentClass(Instrument);export{loadSong};